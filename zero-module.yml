name: zero-backend-py-easy-rest
description: 'Zero module for a backend service in Python'
author: 'Jean Pinzon'
zeroVersion: '>= 0.2.1'

commands:
  check: sh scripts/check.sh

template:
  strictMode: true
  delimiters:
    - '<%'
    - '%>'
  inputDir: 'templates'
  outputDir: 'backend-service'

parameters:
  - field: database
    label: Database engine to use
    options:
      "mongo": "Mongo DB"
  
  - field: mongoDatabaseName
    label: Mongo Database Name
    conditions:
    - action: KeyMatchCondition
      whenValue: "mongo"
      matchField: database
  - field: mongoDatabasePassword
    label: Mongo Database Password
    conditions:
    - action: KeyMatchCondition
      whenValue: "mongo"
      matchField: database

  - field: cacheStore
    label: "Cache store to use"
    options:
      "none": "none"
      "memory": "In Memory"
      "redis": "Redis"
  
  - field: redisDatabaseName
    label: Redis Database Name
    conditions:
    - action: KeyMatchCondition
      whenValue: "redis"
      matchField: cacheStore
  - field: redisDatabasePassword
    label: Redis Database Password
    conditions:
    - action: KeyMatchCondition
      whenValue: "redis"
      matchField: cacheStore
  
  - field: CIVendor
    label: Which CI vendor would you like to use?
    info: "Build pipelines will be set up which will deploy your code to your infrastructure whenever PRs are merged to the main branch."
    default: "circleci"
    options:
      "github-actions": "Github Actions"


conditions:
  - action: ignoreFile
    matchField: CIVendor
    whenValue: "circleci"
    data:
    - .github/
